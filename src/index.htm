<!doctype html>
<html lang="en-US">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/cyborg/bootstrap.min.css" integrity="sha384-nEnU7Ae+3lD52AK+RGNzgieBWMnEfgTbRHIwEvp1XXPdqdO6uLTd/NwXbzboqjc2" crossorigin="anonymous">
  <link rel="stylesheet" href="./bundle.css">
  <title>IFridge</title>
</head>

<body>
  <div class="jumbotron">
    <h1>Welcome to IFridge</h1>
  </div>
   <div id="app">
     <!--hvad har vi i kÃ¸leskabet-->
    <div class="panel panel-primary">  
      <h4 class="panel-heading">What's in my fridge?</h4>
      <button id="getAllButton" class="btn btn-primary" v-on:click="getAllGroceries()">Get List</button>
      <button id="clear list" class="btn btn-primary" v-on:click="clearList()">Hide List</button>        
      <table id="Table1" class="table table-striped table-dark table-bordered" >
         <thead>
          <tr>
            <th @click="sort('productName')">Product name</th>
            <th @click="sort('weight')">Weight</th>            
            <th @click="sort('subCategoryName')">Sub category name</th>                        
            <th @click="sort('dateAdded')">Date added</th>           
            <th @click="sort('daysToExpire')">Days to expiration</th>            
            <th>Status on grocery</th>                                           <!--click funktion??-->
            <!--<th @click="sort('productInstanceId')">productInstanceId</th>-->
            <!--<th @click="sort('barcode')" id="barcodeButton">Barcode</th>-->
            <!--<th @click="sort('categoryName')">Category name</th>-->    
            <!--<th @click="sort('expiration')">Expiration date</th>-->
            <!--<th @click="sort('product.picture')">Picture</th>-->
          </tr>
        </thead>
       <tbody>
          <tr id = "TableRows" v-for="grocery in sortedGroceries">
            <td class="nameList">{{grocery.productName}}</td>
            <td class="weightList">{{grocery.weight}}</td>           
            <td class="subCategoryList">{{grocery.subCategoryName}}</td>               
            <td>{{grocery.dateAdded}}</td>           
            <td class="expirationList">{{grocery.daysToExpire}}</td>            
            <td class="expirationStatus"> 
              <img class="warningImage" v-if="grocery.expireWarning" src="https://www.52oaks.com/app/uploads/2017/01/Achtung.svg_-768x673.png">
              <h6 v-else>The item is still good</h6>  
            </td>
            <!--<td class="productInstanceIdList">{{grocery.productInstanceId}}</td>-->
            <!--<td class="barcodeList">{{grocery.barcode}}</td>-->
            <!--<td>{{grocery.categoryName}}</td>-->     
            <!--<td class="expirationList">{{grocery.product.expiration}}</td>-->
            <!--<td class="pictureList">{{grocery.product.picture}}</td>-->
            </div>
            <td class="deleteButtonList"><button id="deleteButton" v-on:click="deleteRow(grocery.productInstanceId)">Delete</button></td>
          </tr>
       </tbody>
      </table>
      <br>
      <!--opskrift liste-->
      <div>
        <h4 class="panel-heading">What's for dinner?</h4>
        <input id="recipeInput" type="text" class="form-control" v-model="recipeQuery" placeholder="type ingredient or recipe">
        <button id= "getRecipes" class="btn btn-primary" v-on:click="getRecipesByQuery(recipeQuery)">Get Recipe</button>
        <ul v-if="recipes.length > 0">
          <li  class="recipeList" id="recipeList" v-for="recipe in recipes">
           <div @click="BuyIngredient(recipe.id)">
            {{recipe.title}}
           </div>
          </li>
        </ul>
        <ul v-if="missingIngredients.length > 0">
          <li :style="{color: '#'+ingredient.fontColor}" id="IngredientList" v-for="ingredient in missingIngredients">
          <div>
            {{ingredient.name}}
          </div> 
          </li>
        </ul>
        <button class="btn btn-primary" id="SendToShoppingList" v-on:click="sendToShoppingList">Send To shopping list</button>
      </div>
      <br>
      <br>
      </div>
      <!--Input ny varer template til DB-->
    <div class="panel panel-primary">
      <h4 class="panel-heading">Input new grocery</h4>
        <div class="panel-body">
        <form class="form-inline" id="groceryInputForm" v-on:submit.prevent="add()"> 
          <div class="form-group">
            <br>
            <input id="barcodeInput" type="number" class="form-control" v-model.number="formData.barcode" placeholder="Barcode #">
            <input id="nameInput" type="text" class="form-control" v-model="formData.productName" placeholder="Name">
            <select v-model="selectedSubCategory" @change="setSubCategoryId(selectedSubCategory.subCategoryId)">
              <option disabled value="">Please select a Sub Category</option>
              <option v-for="item in subCategories" :value="item">{{item.subCategoryName}}</option>
            </select>         
            <input id="expirationDateInput" type="number" class="form-control" v-model.number="formData.expiration" placeholder="Expiration Date">
            <input id="weightInput" type="number" class="form-control" v-model.number="formData.weight" placeholder="Weight">
            <input id="pictureInput" type="text" class="form-control" v-model="formData.picture" placeholder="Picture">
          </div>
          <button id="add" class="btn btn-primary" v-on:click="add()">Add to IFridge</button>
        </form>
      </div>
    </div>
     <br>
  <!--shopping liste-->
    <div>
      <div class="panel panel-primary">
        <h4 class="panel-heading">Shopping list</h4>
        <form class="form-inline" v-on:submit.prevent="addToShopping()"><div>
            <input class="form-control" id="itemName" v-model="formDataShopping.name" type="text" placeholder="Item">          
            <button class="btn btn-primary" id="addToShopping">Add to Shopping List</button>
            <button class="btn btn-primary" id="GetShoppingList" v-on:click="getShoppingList()">get shopping list from recipe</button>
        </form>
      </div>
    </div>        
    <div>
    <table id="ShoppingListHeadline">
      <thead>
        <tr>
          <th>Item Name</th>
          <th>Amount</th>
          <th>In Cart</th>
      </tr>
      </thead>
      <tbody>
        <tr id="ShoppingListRows" v-for="item in shoppingCart">
          <td>{{item.name}}</td>
          <td>{{item.amount}}</td>
          <td>{{item.isInCart}}</td>
      </tr>
      </tbody>
    </table>
    </div>
  </div>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
 
  <script src="bundle.js"></script>
</body>

</html>